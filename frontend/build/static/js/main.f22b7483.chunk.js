(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(21),c=a.n(r),s=a(17),i=a(11),o=a(33),l=a(9),j=a.n(l),d=a(14),u=a(45),b=Object(o.b)({name:"user",initialState:{name:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).first_name:"",email:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).email:""},reducers:{set_user_details:function(e,t){e.name=t.payload.first_name,e.email=t.payload.email},clear_user_details:function(e){e.name="",e.email=""}}}),h=b.actions,O=h.set_user_details,m=h.clear_user_details,p=function(e,t){return function(){var a=Object(d.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.get("/api/usersByEmail/".concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:r=a.sent,n(O(r.data)),localStorage.setItem("user",JSON.stringify(r.data));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},x=b.reducer,f=a(45),g=Object(o.b)({name:"token",initialState:{loading:!1,error:"",access_token:localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")).access:"",refresh_token:localStorage.getItem("token")?JSON.parse(localStorage.getItem("token")).refresh:""},reducers:{login_request:function(e){e.loading=!0,e.error=""},login_success:function(e,t){e.access_token=t.payload.access,e.refresh_token=t.payload.refresh,e.loading=!1},login_fail:function(e,t){e.access_token="",e.refresh_token="",e.error=t.payload,e.loading=!1},logout_success:function(e){e.access_token="",e.refresh_token=""}}}),v=g.actions,_=v.login_request,y=v.login_success,w=v.login_fail,N=v.logout_success,C=function(e,t){return function(){var a=Object(d.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(_()),a.prev=1,a.next=4,f.post("/api/token/",{username:e,password:t});case 4:r=a.sent,n(y(r.data)),localStorage.setItem("token",JSON.stringify(r.data)),n(p(e,r.data.access)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),n(w(void 0===a.t0.response.data.detail?a.t0.message:a.t0.response.data.detail)),localStorage.removeItem("token");case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()},k=function(){return function(e){e(N()),localStorage.removeItem("token"),e((function(e){e(m()),localStorage.removeItem("user")}))}},S=function(e){return function(){var t=Object(d.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.get("/api/token/verify/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),a(k());case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},L=g.reducer,E=a(45),I=Object(o.b)({name:"register",initialState:{loading:!1,error:"",error_code:""},reducers:{register_request:function(e){e.loading=!0,e.error="",e.error_code=""},register_success:function(e){e.loading=!1},register_fail:function(e,t){e.error=t.payload.error,e.error_code=t.payload.error_code,e.loading=!1}}}),B=I.actions,T=B.register_request,G=B.register_success,P=B.register_fail,D=I.reducer,A=a(45),z=Object(o.b)({name:"create_event",initialState:{create_loading:!1,create_error:"",create_error_code:"",created:!1,update_loading:!1,update_error:"",update_error_code:"",sending_emails_loading:!1,sending_emails_error:"",sending_emails_code:""},reducers:{create_event_request:function(e){e.create_loading=!0,e.create_error="",e.create_error_code=""},create_event_success:function(e){e.create_loading=!1,e.created=!0},create_event_fail:function(e,t){e.create_error=t.payload.error,e.create_error_code=t.payload.error_code,e.create_loading=!1,e.created=!1},create_event_redirected:function(e){e.created=!1},update_event_request:function(e){e.update_loading=!0,e.update_error_code="",e.update_error=""},update_event_success:function(e){e.update_loading=!1},update_event_fail:function(e,t){e.update_error=t.payload.error,e.update_error_code=t.payload.error_code,e.update_loading=!1},sending_emails_request:function(e){e.sending_emails_loading=!0,e.sending_emails_error_code="",e.sending_emails_error=""},sending_emails_success:function(e){e.sending_emails_loading=!1},sending_emails_fail:function(e,t){e.sending_emails_error=t.payload.error,e.sending_emails_error_code=t.payload.error_code,e.sending_emails_loading=!1}}}),U=z.actions,q=U.create_event_request,J=U.create_event_success,F=U.create_event_fail,$=z.actions.create_event_redirected,R=z.actions,Z=R.update_event_request,Y=R.update_event_success,H=R.update_event_fail,M=z.actions,K=M.sending_emails_request,W=M.sending_emails_success,Q=M.sending_emails_fail,V=function(e,t,a,n){return function(){var r=Object(d.a)(j.a.mark((function r(c){var s,i,o;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(K()),r.prev=1,r.next=4,A.post("/api/draw-names/".concat(n,"/"),{subject:t,body:a},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 4:return s=r.sent,c(W()),r.abrupt("return",s);case 9:r.prev=9,r.t0=r.catch(1),i=r.t0.response.data,o=r.t0.message,401===r.t0.response.status?c(k()):c(Q({error:i,error_code:o}));case 14:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},X=z.reducer,ee=Object(o.a)({reducer:{token:L,user:x,register:D,event:X}}),te=(a(128),a(129),a(7)),ae=a(147),ne=a(142),re=a(151),ce=a(148),se=a(61),ie=a(1),oe=function(){var e=Object(te.r)(),t=Object(i.c)((function(e){return e.token})),a=Object(i.c)((function(e){return e.user})).name,n=Object(i.b)();return Object(ie.jsx)(ae.a,{bg:"primary",expand:"sm",className:"navbar-dark",children:Object(ie.jsxs)(ne.a,{children:[Object(ie.jsx)(se.LinkContainer,{to:"/",children:Object(ie.jsx)(ae.a.Brand,{children:"Secret Santa"})}),Object(ie.jsx)(ae.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ie.jsx)(ae.a.Collapse,{id:"basic-navbar-nav",children:Object(ie.jsxs)(re.a,{activeKey:e.pathname,className:"me-auto",children:[Object(ie.jsx)(se.LinkContainer,{to:"/create-event",children:Object(ie.jsx)(re.a.Link,{children:"Create Event"})}),t&&a?Object(ie.jsxs)(ce.a,{title:a,id:"basic-nav-dropdown",children:[Object(ie.jsx)(se.LinkContainer,{to:"/manage-events",children:Object(ie.jsx)(ce.a.Item,{children:"Manage Events"})}),Object(ie.jsx)(ce.a.Divider,{}),Object(ie.jsx)(ce.a.Item,{onClick:function(){return n(k())},children:"Logout"})]}):Object(ie.jsx)(se.LinkContainer,{to:"/login",children:Object(ie.jsx)(re.a.Link,{children:"Login"})})]})})]})})},le=a(143),je=a(97),de=a(96),ue=function(){return Object(ie.jsx)(ne.a,{className:"flex-grow-1",fluid:!0,children:Object(ie.jsx)(le.a,{className:"align-items-center w-100 h-100",children:Object(ie.jsxs)(ne.a,{children:[Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(je.a,{xs:"auto",children:Object(ie.jsx)("h1",{className:"text-secondary",children:"Secret Santa"})})}),Object(ie.jsx)(le.a,{className:"justify-content-center my-3",children:Object(ie.jsx)(je.a,{xs:"10",md:"6",children:Object(ie.jsx)("h5",{className:"text-secondary text-center",children:"Just a simple Secret Santa website you can use with friends and family."})})}),Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(je.a,{xs:"auto",children:Object(ie.jsx)(de.a,{type:"button",variant:"outline-secondary",size:"lg",as:s.Link,to:"/create-event",children:"Get Started"})})})]})})})},be=a(19),he=a(4),Oe=a(149),me=a(144),pe=a(145),xe=function(){var e=Object(n.useState)(""),t=Object(he.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(he.a)(c,2),o=s[0],l=s[1],u=Object(n.useState)(0),b=Object(he.a)(u,2),h=b[0],O=b[1],m=Object(n.useState)(""),p=Object(he.a)(m,2),x=p[0],f=p[1],g=Object(n.useState)(3),v=Object(he.a)(g,2),_=v[0],y=v[1],w=Object(n.useState)([["",""],["",""]]),N=Object(he.a)(w,2),C=N[0],L=N[1],E=Object(n.useState)(!0),I=Object(he.a)(E,2),B=I[0],T=I[1],G=Object(n.useState)(""),P=Object(he.a)(G,2),D=P[0],z=P[1],U=Object(i.b)(),R=Object(i.c)((function(e){return e.user})),Z=R.name,Y=R.email,H=Object(i.c)((function(e){return e.token})).access_token,M=Object(i.c)((function(e){return e.event})),K=M.create_loading,W=M.create_error,Q=M.create_error_code,V=M.created,X=Object(te.t)();Object(n.useEffect)((function(){""===H?X("/login?redirect=create-event"):(U(S(H)),V&&(X("/manage-events"),U($())))}),[U,H,X,V]);var ee=function(){y(_+1);var e=Object(be.a)(C);e.push(["",""]),L(e)},ae=function(e,t,a){var n=Object(be.a)(C);n[t][a]=e.target.value,L(n)},re=function(e){e.preventDefault(),z("");var t=[];if(B&&t.push([Z,Y]),""!==a)if(h<0)z("Invalid budget");else{for(var n=0;n<C.length;n++){if(""!==C[n][0]&&""!==C[n][1])t.push(C[n]);else{if(""===C[n][0]&&""===C[n][1])continue;if(""===C[n][0]||""===C[n][1])return void z("Participants not filled up properly")}if(r=C[n][1],!String(r).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return void z("Invalid email address")}var r;if(t.length<3)z("Not enough people for a Secret Santa");else{var c={title:a,host:Y,num_participants:t.length,participant_details_list:t,date:o,budget:h,location:x};U(function(e,t){return function(){var a=Object(d.a)(j.a.mark((function a(n){var r,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(q()),a.prev=1,a.next=4,A.post("/api/events/",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 4:n(J()),a.next=12;break;case 7:a.prev=7,a.t0=a.catch(1),r=a.t0.response.data,c=a.t0.message,401===a.t0.response.status?n(k()):n(F({error:r,error_code:c}));case 12:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return a.apply(this,arguments)}}()}(H,c))}}else z("Title is empty")};return Object(ie.jsx)(ne.a,{className:"flex-grow-1",fluid:"true",children:Object(ie.jsx)(le.a,{className:"justify-content-center w-100 h-100",children:Object(ie.jsx)(je.a,{md:"8",className:"align-items-center",children:Object(ie.jsx)(ne.a,{className:"w-100 h-100",children:Object(ie.jsx)(le.a,{className:"align-items-center w-100 h-100",children:Object(ie.jsx)(ne.a,{children:Object(ie.jsxs)(Oe.a,{children:[Object(ie.jsx)(le.a,{children:Object(ie.jsx)("h1",{className:"text-center",children:"Create Event"})}),""!==D&&Object(ie.jsx)(me.a,{variant:"danger",children:D}),""!==W&&Object(ie.jsxs)(me.a,{variant:"danger",children:[Object(ie.jsx)("p",{children:W}),Q]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicTitle",children:[Object(ie.jsx)(Oe.a.Label,{children:"Event Title"}),Object(ie.jsx)(Oe.a.Control,{type:"text",placeholder:"Enter event title",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicDate",children:[Object(ie.jsx)(Oe.a.Label,{children:"Date"}),Object(ie.jsx)(Oe.a.Control,{type:"date",placeholder:"Enter date",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicBudget",children:[Object(ie.jsx)(Oe.a.Label,{children:"Budget"}),Object(ie.jsx)(Oe.a.Control,{type:"number",placeholder:"Enter budget",min:"0",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicLocation",children:[Object(ie.jsx)(Oe.a.Label,{children:"Location"}),Object(ie.jsx)(Oe.a.Control,{type:"text",placeholder:"Enter location",value:x,onChange:function(e){return f(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicParticipants",children:[Object(ie.jsx)(Oe.a.Label,{children:"Participants"}),Object(ie.jsx)(Oe.a.Check,{inline:!0,label:"Include self?",name:"group1",type:"checkbox",className:"mx-5",checked:B,onChange:function(){B?(T(!1),C.length<3?(ee(),y(3)):y(_-1)):(T(!0),y(_+1))}}),Object(ie.jsxs)(le.a,{className:"",children:[Object(ie.jsx)(je.a,{xs:"4",children:Object(ie.jsx)(Oe.a.Label,{children:"Name"})}),Object(ie.jsx)(je.a,{xs:"6",children:Object(ie.jsx)(Oe.a.Label,{children:"Email"})})]}),B&&Object(ie.jsxs)(le.a,{className:"mb-3",children:[Object(ie.jsx)(je.a,{xs:"4",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"text",value:Z,disabled:!0})})}),Object(ie.jsx)(je.a,{xs:"6",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"email",value:Y,disabled:!0})})})]}),C.map((function(e,t){return Object(ie.jsxs)(le.a,{className:"mb-3",children:[Object(ie.jsx)(je.a,{xs:"4",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"name",placeholder:"Enter Participant Name",value:e[0],onChange:function(e){return ae(e,t,0)}})})}),Object(ie.jsx)(je.a,{xs:"6",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"email",placeholder:"Enter Participant Email",value:e[1],onChange:function(e){return ae(e,t,1)}})})}),Object(ie.jsx)(je.a,{xs:"2",children:Object(ie.jsx)(de.a,{variant:"outline-danger",type:"button",onClick:function(){return function(e){y(_-1);var t=Object(be.a)(C);t.splice(e,1),L(t)}(t)},disabled:_<=3,children:"Remove"})})]},t)})),Object(ie.jsx)(je.a,{className:"mb-3",children:Object(ie.jsx)(de.a,{variant:"outline-primary",type:"button",onClick:function(){return ee()},children:"Add Participant"})})]}),Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(je.a,{sm:"auto",md:"auto",children:Object(ie.jsx)(de.a,{variant:"primary",type:"submit",onClick:function(e){return re(e)},children:"Create Event"})})}),K&&Object(ie.jsxs)(n.Fragment,{children:[Object(ie.jsx)("p",{children:"Creating Event"}),Object(ie.jsx)(pe.a,{animated:!0,now:100,variant:"success"})]})]})})})})})})})},fe=function(){var e=Object(n.useState)(""),t=Object(he.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(he.a)(c,2),l=o[0],j=o[1],d=Object(i.c)((function(e){return e.token})),u=d.error,b=d.loading,h=d.access_token,O=Object(i.b)(),m=Object(te.r)().search.split("=")[1];m&&localStorage.setItem("redirect",m);var p=Object(te.t)();Object(n.useEffect)((function(){if(h){var e=localStorage.getItem("redirect");if(console.log(e),e){var t=e.split("manage-events-");console.log(t),t.length>1?p("/manage-events/".concat(t[1])):"manage-events"===t[0]?p("/manage-events"):p("/create-event")}else p("/create-event");localStorage.removeItem("redirect")}}),[m,h,p]);return Object(ie.jsx)(ne.a,{className:"flex-grow-1",fluiadd:"true",children:Object(ie.jsx)(le.a,{className:"justify-content-center w-100 h-100",children:Object(ie.jsx)(je.a,{md:"4",className:"align-items-center",children:Object(ie.jsx)(ne.a,{className:"w-100 h-100",children:Object(ie.jsx)(le.a,{className:"align-items-center w-100 h-100",children:Object(ie.jsx)(ne.a,{children:Object(ie.jsxs)(Oe.a,{children:[Object(ie.jsx)("h1",{children:"Sign in"}),u&&Object(ie.jsx)(me.a,{variant:"danger",children:u}),"create-event"===m&&Object(ie.jsx)(me.a,{variant:"warning",children:"Sign In to Create an Event!"}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(ie.jsx)(Oe.a.Label,{children:"Email address"}),Object(ie.jsx)(Oe.a.Control,{type:"email",placeholder:"Enter email",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ie.jsx)(Oe.a.Label,{children:"Password"}),Object(ie.jsx)(Oe.a.Control,{type:"password",placeholder:"Password",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(ie.jsx)(de.a,{variant:"primary",type:"submit",onClick:function(e){return function(e){e.preventDefault(),p("/login"),O(C(a,l))}(e)},disabled:b,children:"Login"}),Object(ie.jsx)(le.a,{className:"mt-3",children:Object(ie.jsxs)(je.a,{children:["New User? ",Object(ie.jsx)(s.Link,{to:"/register",children:"Register"})]})}),b&&Object(ie.jsxs)(n.Fragment,{children:[Object(ie.jsx)("p",{children:"Logging in..."}),Object(ie.jsx)(pe.a,{animated:!0,now:100,variant:"success"})]})]})})})})})})})},ge=function(){var e=Object(n.useState)(""),t=Object(he.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(he.a)(c,2),l=o[0],u=o[1],b=Object(n.useState)(""),h=Object(he.a)(b,2),O=h[0],m=h[1],p=Object(n.useState)(""),x=Object(he.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)(""),_=Object(he.a)(v,2),y=_[0],w=_[1],N=Object(te.t)(),k=Object(i.c)((function(e){return e.register})),S=k.loading,L=k.error,I=k.error_code,B=Object(i.c)((function(e){return e.token})),D=B.loading,A=B.error,z=B.access_token,U=Object(i.b)(),q=function(e){e.preventDefault(),function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}(l)?""===a||""===l||""===O||""===f?w("One or more fields are empty"):O===f?(w(""),U(function(e,t,a){return function(){var n=Object(d.a)(j.a.mark((function n(r){var c,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(T()),n.prev=1,n.next=4,E.post("/api/users/",{first_name:e,email:t,password:a});case 4:r(G()),r(C(t,a)),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),c=n.t0.response.data,s=n.t0.message,r(P({error:c,error_code:s}));case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}(a,l,O))):w("Passwords do not match"):w("Invalid email address")};return Object(n.useEffect)((function(){z&&N("/create-event")}),[z,N]),Object(ie.jsx)(ne.a,{className:"flex-grow-1",fluid:!0,children:Object(ie.jsx)(le.a,{className:"justify-content-center w-100 h-100",children:Object(ie.jsx)(je.a,{md:"4",className:"align-items-center",children:Object(ie.jsx)(ne.a,{className:"w-100 h-100",children:Object(ie.jsx)(le.a,{className:"align-items-center w-100 h-100",children:Object(ie.jsx)(ne.a,{children:Object(ie.jsxs)(Oe.a,{children:[Object(ie.jsx)("h1",{children:"Register"}),""!==y&&Object(ie.jsx)(me.a,{variant:"danger",children:y}),""!==L&&Object(ie.jsxs)(me.a,{variant:"danger",children:[Object(ie.jsx)("p",{children:L}),I]}),""!==A&&Object(ie.jsx)(me.a,{variant:"danger",children:A}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",children:[Object(ie.jsx)(Oe.a.Label,{children:"Name"}),Object(ie.jsx)(Oe.a.Control,{type:"email",placeholder:"Enter name",value:a,onChange:function(e){return r(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(ie.jsx)(Oe.a.Label,{children:"Email address"}),Object(ie.jsx)(Oe.a.Control,{type:"email",placeholder:"Enter email",value:l,onChange:function(e){return u(e.target.value)}}),Object(ie.jsx)(Oe.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ie.jsx)(Oe.a.Label,{children:"Password"}),Object(ie.jsx)(Oe.a.Control,{type:"password",placeholder:"Password",value:O,onChange:function(e){return m(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicConfirmPassword",children:[Object(ie.jsx)(Oe.a.Label,{children:"Confirm Password"}),Object(ie.jsx)(Oe.a.Control,{type:"password",placeholder:"Confirm Password",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(ie.jsx)(de.a,{variant:"primary",type:"submit",onClick:function(e){return q(e)},children:"Sign up"}),Object(ie.jsx)(le.a,{className:"my-3",children:Object(ie.jsxs)(je.a,{children:["New User? ",Object(ie.jsx)(s.Link,{to:"/login",children:"Login"})]})}),S&&Object(ie.jsxs)(n.Fragment,{children:[Object(ie.jsx)("p",{children:"Registering..."}),Object(ie.jsx)(pe.a,{animated:!0,now:50,variant:"success"})]}),D&&Object(ie.jsxs)(n.Fragment,{children:[Object(ie.jsx)("p",{children:"Logging in..."}),Object(ie.jsx)(pe.a,{animated:!0,now:100,variant:"success"})]})]})})})})})})})},ve=a(152),_e=function(){var e=Object(n.useState)([]),t=Object(he.a)(e,2),r=t[0],c=t[1],o=Object(i.b)(),l=Object(te.r)().search.split("=")[1],u=Object(i.c)((function(e){return e.token})).access_token,b=Object(te.t)(),h=a(45),O=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/api/events/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}});case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===u?b("/login?redirect=manage-events"):(o(S(u)),O())}),[o,u,b]);var m=function(e,t){var a=new Date,n=new Date(t);return e?a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()&&a.getDate()===n.getDate():n>a};return Object(ie.jsxs)(ne.a,{className:"flex-grow-1 flex-wrap flex-row",children:["event"===l&&Object(ie.jsx)(me.a,{variant:"warning",children:"You are not authorised to view that event!"}),Object(ie.jsx)(le.a,{className:"justify-content-center",children:r.map((function(e){return Object(ie.jsxs)(ve.a,{text:"light",style:{width:"18rem",textDecoration:"none"},className:"my-5 mx-5",as:s.Link,to:"/manage-events/".concat(e.id),bg:e.date?m(!0,e.date)?"warning":m(!1,e.date)?"primary":"secondary":"info",children:[Object(ie.jsx)(ve.a.Header,{children:e.date?e.date:"Date Unconfirmed"}),Object(ie.jsxs)(ve.a.Body,{children:[Object(ie.jsx)(ve.a.Title,{children:e.title}),Object(ie.jsx)(ve.a.Text,{children:""===e.location?"Location Unconfirmed":e.location}),Object(ie.jsx)(ve.a.Text,{children:"".concat(e.num_participants," Participants")}),Object(ie.jsx)(ve.a.Text,{children:"0.00"===e.budget?"Budget Unconfirmed":"Budget: ".concat(e.budget)})]})]},e.id)}))})]})},ye=a(150),we=a(146),Ne=a(98),Ce=function(){var e=Object(n.useState)(""),t=Object(he.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(""),o=Object(he.a)(s,2),l=o[0],u=o[1],b=Object(n.useState)(0),h=Object(he.a)(b,2),O=h[0],m=h[1],p=Object(n.useState)(""),x=Object(he.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)(3),_=Object(he.a)(v,2),y=_[0],w=_[1],N=Object(n.useState)([["",""],["",""]]),C=Object(he.a)(N,2),L=C[0],E=C[1],I=Object(n.useState)(!1),B=Object(he.a)(I,2),T=B[0],G=B[1],P=Object(n.useState)(!1),D=Object(he.a)(P,2),z=D[0],U=D[1],q=Object(n.useState)(""),J=Object(he.a)(q,2),F=J[0],$=J[1],R=Object(n.useState)(""),M=Object(he.a)(R,2),K=M[0],W=M[1],Q=Object(n.useState)(""),X=Object(he.a)(Q,2),ee=X[0],ae=X[1],re=Object(i.b)(),ce=Object(i.c)((function(e){return e.user})),se=ce.name,oe=ce.email,ue=Object(i.c)((function(e){return e.token})).access_token,xe=Object(i.c)((function(e){return e.event})),fe=xe.sending_emails_loading,ge=xe.sending_emails_error,ve=xe.sending_emails_error_code,_e=Object(i.c)((function(e){return e.event})),Ce=_e.update_loading,ke=_e.update_error,Se=_e.update_error_code,Le=Object(te.t)(),Ee=Object(te.w)().slug,Ie=a(45),Be=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.get("/api/events/".concat(Ee,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ue)}});case 3:t=e.sent,c(t.data.title),u(t.data.date),m(Number(t.data.budget)),g(t.data.location),w(t.data.num_participants),E(t.data.participant_details),G(t.data.names_drawn),U(t.data.emails_sent),$("Secret Santa: ".concat(t.data.title)),W("Hi $giver,\n\nYou've been invited to a Secret Santa organised by ".concat(se,".\n\nDate: ").concat(t.data.date?t.data.date:"Date Unconfirmed","\nBudget: ").concat("0.00"!==t.data.budget?t.data.budget:"Budget Unconfirmed","\nLocation: ").concat(""!==t.data.location?t.data.location:"Location Unconfirmed","\n\nYou will be giving your gift to $receiver.")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),401===e.t0.response.status&&Le("/manage-events?redirect=event");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""===ue?Le("/login?redirect=manage-events-".concat(Ee)):(re(S(ue)),Be())}),[re,ue,Le]);var Te=function(e,t,a){var n=Object(be.a)(L);n[t][a]=e.target.value,E(n)},Ge=function(e){e.preventDefault(),ae("");var t=[];if(""!==r)if(O<0)ae("Invalid budget");else{for(var a=0;a<L.length;a++){if(""!==L[a][0]&&""!==L[a][1])t.push(L[a]);else{if(""===L[a][0]&&""===L[a][1])continue;if(""===L[a][0]||""===L[a][1])return void ae("Participants not filled up properly")}if(n=L[a][1],!String(n).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return void ae("Invalid email address")}var n;if(t.length<3)ae("Not enough people for a Secret Santa");else{var c={title:r,host:oe,num_participants:t.length,participant_details_list:t,date:l,budget:O,location:f};re(function(e,t,a){return function(){var n=Object(d.a)(j.a.mark((function n(r){var c,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Z()),n.prev=1,n.next=4,A.put("/api/events/".concat(a,"/"),t,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 4:r(Y()),n.next=12;break;case 7:n.prev=7,n.t0=n.catch(1),c=n.t0.response.data,s=n.t0.message,401===n.t0.response.status?r(k()):r(H({error:c,error_code:s}));case 12:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()}(ue,c,Ee))}}else ae("Title is empty")},Pe=function(){re(function(e,t){return function(){var a=Object(d.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,A.delete("/api/events/".concat(t,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),401===a.t0.response.status&&n(k());case 8:case"end":return a.stop()}}),a,null,[[0,5]])})));return function(e){return a.apply(this,arguments)}}()}(ue,Ee)),Le("/manage-events")},De=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie.get("/api/draw-names/".concat(Ee,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ue)}});case 3:t=e.sent,G(t.data.names_drawn),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),401===e.t0.response.status&&Le("/manage-events?redirect=event");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(V(ue,F,K,Ee));case 2:t=e.sent;try{U(t.data.emails_sent)}catch(a){U(!1)}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ie.jsx)(ne.a,{className:"flex-grow-1",fluid:"true",children:Object(ie.jsx)(le.a,{className:"justify-content-center w-100 h-100",children:Object(ie.jsx)(je.a,{md:"8",className:"align-items-center",children:Object(ie.jsx)(ne.a,{className:"w-100 h-100",children:Object(ie.jsxs)(le.a,{className:"w-100 h-100 justify-content-between",children:[Object(ie.jsx)(je.a,{sm:"12",md:"5",children:Object(ie.jsx)(ne.a,{children:Object(ie.jsxs)(Oe.a,{children:[Object(ie.jsx)(le.a,{children:Object(ie.jsx)("h1",{className:"text-center",children:"Update Event"})}),""!==ee&&Object(ie.jsx)(me.a,{variant:"danger",children:ee}),""!==ke&&Object(ie.jsxs)(me.a,{variant:"danger",children:[Object(ie.jsx)("p",{children:ke}),Se]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicTitle",children:[Object(ie.jsx)(Oe.a.Label,{children:"Event Title"}),Object(ie.jsx)(Oe.a.Control,{type:"text",placeholder:"Enter event title",value:r,onChange:function(e){return c(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicDate",children:[Object(ie.jsx)(Oe.a.Label,{children:"Date"}),Object(ie.jsx)(Oe.a.Control,{type:"date",placeholder:"Enter date",value:l,onChange:function(e){return u(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicBudget",children:[Object(ie.jsx)(Oe.a.Label,{children:"Budget"}),Object(ie.jsx)(Oe.a.Control,{type:"number",placeholder:"Enter budget",min:"0",value:O,onChange:function(e){return m(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicLocation",children:[Object(ie.jsx)(Oe.a.Label,{children:"Location"}),Object(ie.jsx)(Oe.a.Control,{type:"text",placeholder:"Enter location",value:f,onChange:function(e){return g(e.target.value)}})]}),Object(ie.jsxs)(Oe.a.Group,{className:"mb-3",controlId:"formBasicParticipants",children:[Object(ie.jsx)(Oe.a.Label,{children:"Participants"}),Object(ie.jsxs)(le.a,{className:"",children:[Object(ie.jsx)(je.a,{xs:"4",children:Object(ie.jsx)(Oe.a.Label,{children:"Name"})}),Object(ie.jsx)(je.a,{xs:"6",children:Object(ie.jsx)(Oe.a.Label,{children:"Email"})})]}),L.map((function(e,t){return Object(ie.jsxs)(le.a,{className:"mb-3",children:[Object(ie.jsx)(je.a,{xs:"4",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"name",placeholder:"Enter Participant Name",value:e[0],onChange:function(e){return Te(e,t,0)}})})}),Object(ie.jsx)(je.a,{xs:"6",children:Object(ie.jsx)(Oe.a.Group,{children:Object(ie.jsx)(Oe.a.Control,{type:"email",placeholder:"Enter Participant Email",value:e[1],onChange:function(e){return Te(e,t,1)}})})}),Object(ie.jsx)(je.a,{xs:"2",children:Object(ie.jsx)(de.a,{variant:"outline-danger",type:"button",onClick:function(){return function(e){w(y-1);var t=Object(be.a)(L);t.splice(e,1),E(t)}(t)},disabled:y<=3,children:"Remove"})})]},t)})),Object(ie.jsx)(je.a,{className:"mb-3",children:Object(ie.jsx)(de.a,{variant:"outline-primary",type:"button",onClick:function(){return function(){w(y+1);var e=Object(be.a)(L);e.push(["",""]),E(e)}()},children:"Add Participant"})})]}),Object(ie.jsxs)(le.a,{className:"justify-content-center mb-5",children:[Object(ie.jsx)(je.a,{xs:"4",md:"auto",className:"mx-3",children:Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(de.a,{variant:"primary",type:"submit",onClick:function(e){return Ge(e)},children:"Update"})})}),Object(ie.jsx)(je.a,{xs:"4",md:"auto",children:Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(de.a,{variant:"secondary",type:"submit",onClick:function(e){return Pe()},children:"Delete"})})})]}),Ce&&Object(ie.jsxs)(n.Fragment,{children:[Object(ie.jsx)("p",{children:"Updating Event"}),Object(ie.jsx)(pe.a,{animated:!0,now:100,variant:"success"})]})]})})}),Object(ie.jsxs)(je.a,{sm:"12",md:"5",children:[Object(ie.jsx)(le.a,{children:Object(ie.jsx)("h1",{className:"text-center",children:"Manage Event"})}),Object(ie.jsx)(le.a,{className:"mt-3",children:T?Object(ie.jsx)("h6",{className:"text-center",children:"Names have already been drawn. Continue to next step."}):Object(ie.jsx)("h6",{className:"text-center",children:"Once details of the event have been finalised, click the button to draw names for secret santa participants."})}),Object(ie.jsx)(le.a,{className:"justify-content-center",children:Object(ie.jsx)(je.a,{sm:"4",md:"auto",children:Object(ie.jsx)(de.a,{variant:"outline-primary",type:"button",onClick:function(){return De()},disabled:T,children:"Draw Names"})})}),""!==ge&&Object(ie.jsxs)(me.a,{variant:"danger",children:[Object(ie.jsx)("p",{children:ge}),ve]}),Object(ie.jsx)(le.a,{className:"mt-5",children:z?Object(ie.jsx)("h6",{className:"text-center",children:"Emails have been sent out. Enjoy your secret santa!"}):Object(ie.jsx)("h6",{className:"text-center",children:"Once names have been drawn, click the button to send out the emails containing details for the secret santa."})}),!z&&Object(ie.jsx)(ye.a,{placement:"right",overlay:Object(ie.jsx)(we.a,{id:"tooltip-right",children:"Use $giver and $receiver as placeholder for giver and receiver names."}),children:Object(ie.jsxs)(Oe.a,{children:[Object(ie.jsx)(Ne.a,{controlId:"floatingTextarea",label:"Subject",className:"mb-3",children:Object(ie.jsx)(Oe.a.Control,{type:"text",value:F,onChange:function(e){return $(e.target.value)}})}),Object(ie.jsx)(Ne.a,{controlId:"floatingTextarea2",label:"Body",children:Object(ie.jsx)(Oe.a.Control,{as:"textarea",value:K,onChange:function(e){return W(e.target.value)},style:{minHeight:"300px"}})})]})}),Object(ie.jsx)(le.a,{className:"justify-content-center mt-3",children:Object(ie.jsx)(je.a,{sm:"4",md:"auto",children:Object(ie.jsx)(de.a,{variant:"outline-primary",type:"button",onClick:function(){return Ae()},disabled:z||!T,children:"Send Emails"})})}),fe&&Object(ie.jsxs)(le.a,{className:"mt-3",children:[Object(ie.jsx)("p",{children:"Sending out emails. This may take a while..."}),Object(ie.jsx)(pe.a,{animated:!0,now:100,variant:"success"})]})]})]})})})})})};var ke=function(){return Object(ie.jsxs)("div",{className:"d-flex flex-column vh-100",fluid:"true",children:[Object(ie.jsx)(oe,{}),Object(ie.jsxs)(te.f,{children:[Object(ie.jsx)(te.d,{path:"/",element:Object(ie.jsx)(ue,{})}),Object(ie.jsx)(te.d,{path:"/create-event",element:Object(ie.jsx)(xe,{})}),Object(ie.jsx)(te.d,{path:"/login",element:Object(ie.jsx)(fe,{})}),Object(ie.jsx)(te.d,{path:"/register",element:Object(ie.jsx)(ge,{})}),Object(ie.jsx)(te.d,{path:"/manage-events",element:Object(ie.jsx)(_e,{})}),Object(ie.jsx)(te.d,{path:"/manage-events/:slug",element:Object(ie.jsx)(Ce,{})})]})]})};c.a.render(Object(ie.jsx)(i.a,{store:ee,children:Object(ie.jsx)(s.HashRouter,{children:Object(ie.jsx)(ke,{})})}),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.f22b7483.chunk.js.map